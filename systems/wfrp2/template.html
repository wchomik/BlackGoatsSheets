<div id="bgsappid" class="container-fluid">
  <h1 class="d-print-none">{{ name }}</h1>
  <ul class="nav nav-pills mb-3 d-print-none" id="pills-tab" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" id="v-panes-character-sheets-tab" data-toggle="pill" href="#v-panes-character-sheets" role="tab" aria-controls="v-panes-character-sheets" aria-selected="true">{{ translations[lang]['character-sheets'] }}</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="v-panes-journal-tab" data-toggle="pill" href="#v-panes-journal" role="tab" aria-controls="v-panes-journal" aria-selected="false">{{ translations[lang]['journal'] }}</a>
    </li>
  </ul>
  <div class="tab-content" id="v-panes-tabContent">
    <div class="tab-pane fade show active" id="v-panes-character-sheets" role="tabpanel" aria-labelledby="v-panes-character-sheets-tab">          
      <nav class="d-print-none">
        <div class="nav nav-pills" id="nav-tab" role="tablist">
          <a v-for="(character, index) in characters"
            class="nav-item nav-link"
            v-bind:class="{ active: index === 0 }"
            aria-selected="index === 0 ? 'true' : 'false'"
            v-bind:id="'nav-tab-' + character.id"
            v-bind:href="'#nav-' + character.id"
            v-bind:aria-controls="'nav-' + character.id"
            data-toggle="pill" role="tab">{{ character.name }}</a>
        </div>
      </nav>
      <div class="tab-content" id="nav-tabContent">
        <div v-for="(character, index) in characters"
          class="tab-pane fade"
          v-bind:class="{ 'show active': index === 0 }"
          v-bind:id="'nav-' + character.id"
          aria-labelledby="'nav-tab-' + character.id"
          role="tabpanel">
          <div class="row">
            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-print-4">
              <table class="shadow p-3 mb-5 bg-black rounded table table-bordered table-striped">
                <tbody>
                  <tr><th scope="row">{{ translations[lang]["name"] }}:</th><td>{{ character.name }}</td></tr>
                  <tr><th scope="row">{{ translations[lang]["race"] }}:</th><td>{{ character.race }}</td></tr>
                  <tr><th scope="row">{{ translations[lang]["sex"] }}:</th><td>{{ character.sex }}</td></tr>
                  <tr><th scope="row">{{ translations[lang]["age"] }}:</th><td>{{ character.age }}</td></tr>
                  <tr><th scope="row">{{ translations[lang]["height"] }}:</th><td>{{ character.height }}</td></tr>
                  <tr><th scope="row">{{ translations[lang]["weight"] }}:</th><td>{{ character.weight }}</td></tr>
                  <tr><th scope="row">{{ translations[lang]["eyes"] }}:</th><td>{{ character.eyes }}</td></tr>
                  <tr><th scope="row">{{ translations[lang]["hair"] }}:</th><td>{{ character.hair }}</td></tr>
                  <tr><th scope="row">{{ translations[lang]["distinguishing_marks"] }}:</th><td>{{ character.distinguishing_marks }}</td></tr>
                </tbody>
              </table>
            </div>
            <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-print-4">
              <table class="shadow p-3 mb-5 bg-black rounded table table-bordered table-striped">
                <tbody>
                  <tr><th scope="row">{{ translations[lang]["career"] }}:</th><td>{{ character.career }}</td></tr>
                  <tr><th scope="row">{{ translations[lang]["career_path"] }}:</th><td>{{ character.career_path }}</td></tr>
                  <tr><th scope="row">{{ translations[lang]["family"] }}:</th><td>{{ character.family }}</td></tr>
                  <tr><th scope="row">{{ translations[lang]["birthplace"] }}:</th><td>{{ character.birthplace }}</td></tr>
                  <tr><th scope="row">{{ translations[lang]["religion"] }}:</th><td>{{ character.religion }}</td></tr>
                  <tr><th scope="row">{{ translations[lang]["star_sign"] }}:</th><td>{{ character.star_sign }}</td></tr>
                </tbody>
              </table>
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-4 col-print-4">
              <table class="shadow p-3 mb-5 bg-black rounded table table-bordered table-striped">
                <tbody>
                  <tr><th scope="row">{{ translations[lang]["disorders"] }}:</th><td>{{ character.disorders }}</td></tr>
                  <tr><th scope="row">{{ translations[lang]["scars"] }}:</th><td>{{ character.scars }}</td></tr>
                  <tr><th scope="row">{{ translations[lang]["background"] }}:</th><td>{{ character.background }}</td></tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-md-6">
            <!-- <div class="card"><div class="card-body"> -->
              <table class="shadow p-3 mb-5 bg-black rounded table table-sm table-bordered table-striped">
                <thead>
                  <tr>
                    <th scope="col">{{ translations[lang]['main_profile_stats'] }}</th>
                    <th scope="col">{{ translations[lang]['starting'] }}</th>
                    <th scope="col">{{ translations[lang]['advance'] }}</th>
                    <th scope="col">{{ translations[lang]['taken'] }}</th>
                    <th scope="col">{{ translations[lang]['current'] }}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="(stat, key) in character.stats.main">
                    <th scope="row">{{ translations[lang][key] }}</th>
                    <td>{{stat.starting}}</td>
                    <td>+{{stat.advance}}</td>
                    <td>{{stat.taken}}</td>
                    <td>{{stat.current}}</td>
                  </tr>
                </tbody>
              </table>
            <!-- </div></div> -->
            </div>
            <div class="col-12 col-md-6">
            <!-- <div class="card"><div class="card-body"> -->
              <table class="shadow p-3 mb-5 bg-black rounded table table-sm table-bordered table-striped">
                <thead>
                  <tr>
                    <th scope="col">{{ translations[lang]['secondary_profile_stats'] }}</th>
                    <th scope="col">{{ translations[lang]['starting'] }}</th>
                    <th scope="col">{{ translations[lang]['advance'] }}</th>
                    <th scope="col">{{ translations[lang]['taken'] }}</th>
                    <th scope="col">{{ translations[lang]['current'] }}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="(stat, key) in character.stats.secondary">
                    <th scope="row">{{ translations[lang][key] }}</th>
                    <td v-bind:class="{ 'table-light': stat.starting == 'disabled' }">{{ stat.starting == 'disabled' ? '' : stat.starting }}</td>
                    <td v-bind:class="{ 'table-light': stat.advance == 'disabled' }">{{ stat.advance == 'disabled' ? '' : stat.advance }}</td>
                    <td v-bind:class="{ 'table-light': stat.taken == 'disabled' }">{{ stat.taken == 'disabled' ? '' : stat.taken }}</td>
                    <td>{{ stat.current }}</td>
                  </tr>
                </tbody>
              </table>
            <!-- </div></div> -->
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-md-6">
            <!-- <div class="card"><div class="card-body"> -->
              <table class="shadow p-3 mb-5 bg-black rounded table table-sm table-bordered table-striped">
                <thead>
                  <tr>
                    <th class="text-center" scope="col" colspan="2">{{ translations[lang]['basic'] }}</th>
                    <th class="text-center" scope="col">{{ translations[lang]['current'] }}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="(skill, key) in character.skills.basic">
                    <th scope="row" data-toggle="tooltip" data-html="true" v-bind:title="skill.tooltip">{{ translations[lang][key] }}</th>
                    <td style="min-width: 100px">
                      <img src="static/black.jpg" class="d-none d-print-block progress" v-bind:style="'width: '+ (100 / 3 * skill.taken) + '%'">
                      <div class="progress">
                        <div class="progress-bar" class="d-print-none" role="progressbar" v-bind:style="'width: '+ (100 / 3 * skill.taken) + '%'"v-bind:aria-valuenow="skill.taken" aria-valuemin="0" aria-valuemax="100"></div>
                      </div>
                    </td>
                    <td class="min">{{ skill.current }}</td>
                  </tr>
                </tbody>
              </table>
            <!-- </div></div> -->
            </div>
            <div class="col-12 col-md-6">
            <!-- <div class="card"><div class="card-body"> -->
              <table class="shadow p-3 mb-5 bg-black rounded table table-sm table-bordered table-striped">
                <thead>
                  <tr>
                    <th class="text-center" scope="col" colspan="2">{{ translations[lang]['advanced'] }}</th>
                    <th class="text-center" scope="col">{{ translations[lang]['current'] }}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="(skill, key) in character.skills.advanced">
                    <th scope="row" data-toggle="tooltip" data-html="true" v-bind:title="skill.tooltip">{{ translations[lang][key] }}</th>
                    <td style="min-width: 100px">
                      <img src="static/black.jpg" class="d-none d-print-block progress" v-bind:style="'width: '+ (100 / 3 * skill.taken) + '%'">
                      <div class="progress">
                        <div class="progress-bar" role="progressbar" v-bind:style="'width: '+ (100 / 3 * skill.taken) + '%'" v-bind:aria-valuenow="skill.taken" aria-valuemin="0" aria-valuemax="100"></div>
                      </div>
                    </td>
                    <td class="min">{{ skill.current }}</td>
                  </tr>
                </tbody>
              </table>
            <!-- </div></div> -->
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="tab-pane fade" id="v-panes-journal" role="tabpanel" aria-labelledby="v-panes-journal-tab">
      <ul class="list-group">
        <li v-for="commit in commits" class="list-group-item">
          <div class="row">
            <div class="col-3">{{commit.commit.committer.date}}</div>
            <div class="col-7">{{commit.commit.message}}</div>
            <div class="col-2">
              <a class="btn btn-primary justify-content-md-center" target="_blank" rel="noopener noreferrer" v-bind:href="commit.html_url" role="button">{{ translations[lang]['show'] }}</a>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>
<script src="systems/wfrp2/character.js"></script>
<script>
    var repo_url = "bgsrepourl";
    var campaign_data = {
        "lang": "pl",
        "translations": translations,
        "characters": [],
        "commits": []
    }

    raw = repo_url.replace("github.com", "raw.githubusercontent.com") + "/develop/"
    api = repo_url.replace("github.com", "api.github.com/repos") + "/commits"

    campaings.bgsappid = {...campaign_data, ...campaings.bgsappid}

    vue_apps.bgsappid = new Vue({
    el: '#bgsappid',
        data: campaings.bgsappid
    })

    $.each( campaings.bgsappid.character_sheets, function( val ) {
        $.getJSON(raw + "characters/" + campaings.bgsappid.character_sheets[val], function(character_data) {
          campaings.bgsappid.characters.push(process_character_sheet(character_data));
        });
    });
</script>